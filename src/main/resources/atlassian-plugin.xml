<atlassian-plugin key="${atlassian.plugin.key}" name="${project.name}" plugins-version="2">
    <plugin-info>
        <description>${project.description}</description>
        <version>${project.version}</version>
        <vendor name="${project.organization.name}" url="${project.organization.url}" />
        <vendor name="${project.organization.name}" url="${project.organization.url}"/>
        <param name="plugin-icon">images/pluginIcon.png</param>
        <param name="plugin-logo">images/pluginLogo.png</param>
    </plugin-info>

    <!-- add our i18n resource -->
    <resource type="i18n" name="i18n" location="i18n"/>

    <component name="Artifactory Server Configuration Management Component" key="artifactoryServerConfigManager"
               class="org.jfrog.bamboo.admin.ServerConfigManager"/>

    <!-- Admin Configurations -->
    <web-item key="configureArtifactoryPlugin" name="Artifactory Plugin" section="system.admin/plugins" weight="10">
        <label key="Artifactory Plugin"/>
        <link linkId="configureArtifactoryPlugin">/admin/manageArtifactoryServers.action</link>
    </web-item>

    <xwork key="manageArtifactoryServersAdmin" name="Artifactory Plugin">
        <package name="configureArtifactoryPlugin" extends="admin">

            <!-- Main container -->
            <action name="manageArtifactoryServers" class="org.jfrog.bamboo.admin.ManageArtifactoryServersAction">
                <result name="input" type="freemarker">/admin/manageArtifactoryServers.ftl</result>
                <result name="success" type="freemarker">/admin/manageArtifactoryServers.ftl</result>
            </action>

            <!-- Artifactory Configurations -->
            <action name="existingArtifactoryServer" class="org.jfrog.bamboo.admin.ExistingArtifactoryServerAction"
                    method="browse">
                <result name="success" type="freemarker">/admin/existingArtifactoryServerView.ftl</result>
            </action>

            <action name="configureArtifactoryServer" class="org.jfrog.bamboo.admin.ConfigureArtifactoryServerAction">
                <result name="input" type="freemarker">/admin/configureArtifactoryServer.ftl</result>
                <result name="success" type="freemarker">/admin/configureArtifactoryServer.ftl</result>
            </action>

            <action name="createArtifactoryServer" class="org.jfrog.bamboo.admin.ConfigureArtifactoryServerAction" method="create">
                <result name="input" type="freemarker">/admin/configureArtifactoryServer.ftl</result>
                <result name="error" type="freemarker">/admin/configureArtifactoryServer.ftl</result>
                <result name="success" type="redirect">/admin/manageArtifactoryServers.action</result>
                <param name="mode">add</param>
            </action>

            <action name="editServer" class="org.jfrog.bamboo.admin.ConfigureArtifactoryServerAction" method="edit">
                <result name="input" type="freemarker">/admin/configureArtifactoryServer.ftl</result>
                <param name="mode">edit</param>
            </action>

            <action name="updateServer" class="org.jfrog.bamboo.admin.ConfigureArtifactoryServerAction" method="update">
                <result name="input" type="freemarker">/admin/configureArtifactoryServer.ftl</result>
                <result name="success" type="redirect">/admin/manageArtifactoryServers.action</result>
                <param name="mode">edit</param>
            </action>

            <action name="confirmDeleteServer" class="org.jfrog.bamboo.admin.ConfigureArtifactoryServerAction" method="confirm">
                <result name="success" type="freemarker" >/admin/credentials/confirmDeleteServer.ftl</result>
            </action>

            <action name="deleteServer" class="org.jfrog.bamboo.admin.ConfigureArtifactoryServerAction" method="delete">
                <result name="error" type="redirect">/admin/manageArtifactoryServers.ftl</result>
                <result name="success" type="redirect">/admin/manageArtifactoryServers.ftl</result>
            </action>

            <!-- Bintray Configurations -->
            <action name="viewBintray" class="org.jfrog.bamboo.admin.ConfigureBintrayAction" method="default">
                <result name="input" type="freemarker">/admin/viewBintray.ftl</result>
                <result name="error" type="freemarker">/admin/error.ftl</result>
            </action>

            <action name="configureBintray" class="org.jfrog.bamboo.admin.ConfigureBintrayAction" method="default">
                <result name="input" type="freemarker">/admin/configureBintray.ftl</result>
                <result name="error" type="freemarker">/admin/error.ftl</result>
            </action>

            <action name="saveBintrayConf" class="org.jfrog.bamboo.admin.ConfigureBintrayAction" method="execute">
                <result name="input" type="freemarker">/admin/configureBintray.ftl</result>
                <result name="success" type="freemarker">/admin/manageArtifactoryServers.ftl</result>
                <result name="error" type="freemarker">/admin/error.ftl</result>
            </action>

        </package>
    </xwork>

    <servlet name="Artifactory Configuration Servlet" key="artifactoryConfigServlet"
             class="org.jfrog.bamboo.admin.ArtifactoryConfigServlet">
        <url-pattern>/artifactoryConfigServlet</url-pattern>
    </servlet>

    <!--<servlet name="Artifactory Build Servlet" key="artifactoryBuildServlet"-->
             <!--class="org.jfrog.bamboo.admin.BuildServlet">-->
        <!--<url-pattern>/artifactoryBuildServlet</url-pattern>-->
    <!--</servlet>-->

    <servlet name="Artifactory Administration Configuration Servlet" key="artifactoryAdminConfigServlet"
             class="org.jfrog.bamboo.admin.ArtifactoryAdminConfigServlet">
        <url-pattern>/artifactoryAdminConfigServlet</url-pattern>
    </servlet>

    <!--<resource type="download" name="builder/dependencies/" location="META-INF/lib/"/>-->

    <!--<resource type="download" name="artifactory-icon.png" location="images/artifactory-icon.png"/>-->
    <!--<resource type="download" name="artifactory-release.png" location="images/artifactory-release.png"/>-->
    <!--<resource type="download" name="bintray.png" location="images/bintray.png"/>-->


</atlassian-plugin>